name: 'GitHub Action Atmos Component Updater'
description: 'GitHub Action Atmos Component Updater'
author: hello@cloudposse.com
branding:
  icon: 'server'
  color: 'white'
inputs:
  github_access_token:
    required: true
    description: "GitHub token used to clone component repositories. It cannot be the autogenerated `GITHUB_TOKEN`."
runs:
  using: "composite"
  steps:
    - name: Setup Terraform
      uses: hashicorp/setup-terraform@v2

    - name: Setup Atmos
      uses: cloudposse/github-action-setup-atmos@v1.0.0

    - name: Set up Go
      uses: actions/setup-go@v3
      with:
        go-version: "1.20"
      id: go

    - name: Setup Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.10'

    - name: Checkout Infra Repository
      uses: actions/checkout@v3
      with:
        fetch-depth: 0

    - name: Install Python Dependencies
      shell: bash
      run: |
        cd ${{ github.action_path }}
        pip install -r src/requirements.txt

#    - name: "Run Atmos Component Updater"
#      shell: bash
#      run: |
#        cd ${{ github.action_path }}
#        python src/main.py \
#          --github-api-token ${{ inputs.token }} \
#          --components-version ${{ env.TERRAFORM_AWS_COMPONENTS_LATEST_TAG }} \
#          --infra-repo-name ${{ inputs.infra-repo-name }} \
#          --infra-repo-dir ${{ inputs.infra-repo-dir }} \
#          --log-level DEBUG
